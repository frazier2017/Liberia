system.time(sub2<-good_good2[(1+(5*(10000-1))):(5*10000),])
system.time(sub2<-good_good2[(1+(5*(100000-1))):(5*100000),])
sub$pop2010[1]
pops<-good_good2[,c(6,10:16)]
pops[,c(6,10:16)]<-pops[,c(6,10:16)]/5
pops[,c(2:8)]<-pops[,c(2:8)]/5
View(pops)
pops<-aggregate(.~id,gpw4_2000_clan,FUN=sum)
pops<-aggregate(.~id,pops,FUN=sum)
pops$id<-as.character(pops$id)
pops$id<-as.numeric(pops$id)
row.names(pops)<-pops$id
View(sub)
m_final<-matrix(nrow=0,ncol=3)
for (i in 1:nrow(good_good2)){
sub<-good_good2[(1+(5*(i-1))):(5*i),]
m1<-matrix(nrow=0,ncol=3)
while(nrow(m1) < pops[i,4]) {
m2<-matrix(nrow=100,ncol=3)
m2[,1]<-runif(100,max=(max(sub$long,na.rm=T)+.00000001),min = (min(sub$long,na.rm=T)-.00000001))
m2[,2]<-runif(100,max=(max(sub$lat,na.rm=T)+.00000001),min = (min(sub$lat,na.rm=T)-.00000001))
m2[,3]<-point.in.polygon(m2[,1],m2[,2],sub$long,sub$lat)
m2<-subset(m2, m2[,3]>0)
m1<-rbind(m1,m2)
m1<-unique(m1)
}
m1<-m1[1:pops[i,4],]
m_final<-rbind(m_final,m1)
}
View(m_final)
pops[,c(2:8)]<-round(pops[,c(2:8)]/10,0)
m_final<-matrix(nrow=0,ncol=3)
for (i in 1:nrow(good_good2)){
sub<-good_good2[(1+(5*(i-1))):(5*i),]
m1<-matrix(nrow=0,ncol=3)
while(nrow(m1) < pops[i,4]) {
m2<-matrix(nrow=100,ncol=3)
m2[,1]<-runif(100,max=(max(sub$long,na.rm=T)+.00000001),min = (min(sub$long,na.rm=T)-.00000001))
m2[,2]<-runif(100,max=(max(sub$lat,na.rm=T)+.00000001),min = (min(sub$lat,na.rm=T)-.00000001))
m2[,3]<-point.in.polygon(m2[,1],m2[,2],sub$long,sub$lat)
m2<-subset(m2, m2[,3]>0)
m1<-rbind(m1,m2)
m1<-unique(m1)
}
m1<-m1[1:pops[i,4],]
m_final<-rbind(m_final,m1)
}
m_final<-matrix(nrow=0,ncol=3)
for (i in 1:nrow(good_good2)){
sub<-good_good2[(1+(5*(i-1))):(5*i),]
m1<-matrix(nrow=0,ncol=3)
while(nrow(m1) < pops[i,4]) {
m2<-matrix(nrow=100,ncol=3)
m2[,1]<-runif(100,max=(max(sub$long,na.rm=T)+.00000001),min = (min(sub$long,na.rm=T)-.00000001))
m2[,2]<-runif(100,max=(max(sub$lat,na.rm=T)+.00000001),min = (min(sub$lat,na.rm=T)-.00000001))
m2[,3]<-point.in.polygon(m2[,1],m2[,2],sub$long,sub$lat)
m2<-subset(m2, m2[,3]>0)
m1<-rbind(m1,m2)
m1<-unique(m1)
}
m1<-m1[1:pops$pop2010[i],]
m_final<-rbind(m_final,m1)
}
pops<-good_good2[,c(6,10:16)]
pops[,c(2:8)]<-pops[,c(2:8)]/5
pops<-aggregate(.~id,pops,FUN=sum)
pops$id<-as.numeric(pops$id)
row.names(pops)<-pops$id
pops[,c(2:8)]<-round(pops[,c(2:8)],0)
m_final<-matrix(nrow=0,ncol=3)
for (i in 1:nrow(good_good2)){
sub<-good_good2[(1+(5*(i-1))):(5*i),]
m1<-matrix(nrow=0,ncol=3)
while(nrow(m1) < pops[i,4]) {
m2<-matrix(nrow=100,ncol=3)
m2[,1]<-runif(100,max=(max(sub$long,na.rm=T)+.00000001),min = (min(sub$long,na.rm=T)-.00000001))
m2[,2]<-runif(100,max=(max(sub$lat,na.rm=T)+.00000001),min = (min(sub$lat,na.rm=T)-.00000001))
m2[,3]<-point.in.polygon(m2[,1],m2[,2],sub$long,sub$lat)
m2<-subset(m2, m2[,3]>0)
m1<-rbind(m1,m2)
m1<-unique(m1)
}
m1<-m1[1:pops$pop2010[i],]
m_final<-rbind(m_final,m1)
}
View(m_final)
m_final<-matrix(nrow=0,ncol=3)
for (i in 1:112830){
sub<-good_good2[(1+(5*(i-1))):(5*i),]
m1<-matrix(nrow=0,ncol=3)
while(nrow(m1) < pops[i,4]) {
m2<-matrix(nrow=100,ncol=3)
m2[,1]<-runif(100,max=(max(sub$long,na.rm=T)+.00000001),min = (min(sub$long,na.rm=T)-.00000001))
m2[,2]<-runif(100,max=(max(sub$lat,na.rm=T)+.00000001),min = (min(sub$lat,na.rm=T)-.00000001))
m2[,3]<-point.in.polygon(m2[,1],m2[,2],sub$long,sub$lat)
m2<-subset(m2, m2[,3]>0)
m1<-rbind(m1,m2)
m1<-unique(m1)
}
m1<-m1[1:pops[i,4],]
m_final<-rbind(m_final,m1)
}
View(m_final)
View(pops)
pops<-good_good2[,c(6,10:16)]
pops[,c(2:8)]<-pops[,c(2:8)]/5
pops<-aggregate(.~id,pops,FUN=sum)
pops$id<-as.numeric(pops$id)
pops<-sort(pops$id)
pops<-good_good2[,c(6,10:16)]
pops[,c(2:8)]<-pops[,c(2:8)]/5
pops<-aggregate(.~id,pops,FUN=sum)
pops$id<-as.numeric(pops$id)
pops<-pops[order(id),]
pops<-pops[order(id),]
pops<-pops[order(-id),]
pops<-pops[order(id),]
pops<-pops[order(pops$id),]
row.names(pops)<-pops$id
pop_list<-pops[,4]
pops[,c(2:8)]<-round(pops[,c(2:8)],0)
pop_list<-pops[,4]
m_final<-matrix(nrow=0,ncol=3)
for (i in 1:112830){
sub<-good_good2[(1+(5*(i-1))):(5*i),]
m1<-matrix(nrow=0,ncol=3)
while(nrow(m1) < pop_list[[i]]) {
m2<-matrix(nrow=100,ncol=3)
m2[,1]<-runif(100,max=(max(sub$long,na.rm=T)+.00000001),min = (min(sub$long,na.rm=T)-.00000001))
m2[,2]<-runif(100,max=(max(sub$lat,na.rm=T)+.00000001),min = (min(sub$lat,na.rm=T)-.00000001))
m2[,3]<-point.in.polygon(m2[,1],m2[,2],sub$long,sub$lat)
m2<-subset(m2, m2[,3]>0)
m1<-rbind(m1,m2)
m1<-unique(m1)
}
m1<-m1[1:pop_list[[i]],]
m_final<-rbind(m_final,m1)
}
View(m_final)
rm(list=ls())
setwd("~/GitHub/Liberia")
library(rgdal)
library(dplyr)
library(rgeos)
library(ggmap)
library(raster)
library(spatstat)
library(maptools)
library(sp)
library(foreign)
library(knitr)
library(gridExtra)
library(rasterVis)
library(colorspace)
library(mapdata)
library(rgl)
library(scales)
library(plot3Drgl)
library(akima)
country<-readOGR(dsn="shapefiles", layer="liberia_revised",stringsAsFactors=FALSE, verbose=FALSE)
cnty<-readOGR(dsn = "shapefiles",layer="counties",stringsAsFactors = FALSE,verbose=FALSE)
dist<-readOGR(dsn="shapefiles",layer="districts", stringsAsFactors = FALSE,verbose = FALSE)
clan<-readOGR(dsn="shapefiles",layer="clans", stringsAsFactors = FALSE,verbose = FALSE)
country<-spTransform(country, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
cnty<-spTransform(cnty, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
dist<-spTransform(dist, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
clan<-spTransform(clan, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
country_f<-fortify(country)
cnty_f<-fortify(cnty)
dist_f<-fortify(dist)
clan_f<-fortify(clan)
gpw4_2000<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2000.tif")
gpw4_2000<-crop(gpw4_2000,extent(country))
gpw4_2005<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2005.tif")
gpw4_2005<-crop(gpw4_2005,extent(country))
gpw4_2010<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2010.tif")
gpw4_2010<-crop(gpw4_2010,extent(country))
gpw4_2015<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2015.tif")
gpw4_2015<-crop(gpw4_2015,extent(country))
growth_00_05<-overlay(gpw4_2000,gpw4_2005,fun=function(r1,r2){return((r2-r1)/r1)})
growth_05_10<-overlay(gpw4_2005,gpw4_2010,fun=function(r1,r2){return((r2-r1)/r1)})
growth_10_15<-overlay(gpw4_2010,gpw4_2015,fun=function(r1,r2){return((r2-r1)/r1)})
load("lbr_data_final.RData")
load("gpw4_lbr_spdf.RData")
load("complete_data.RData")
load("points_df_10percent.RData")
load("city_points.RData")
View(good_good2)
View(y)
View(lbr_data_final)
pops<-good_good2[,c(6,10:16)]
pops[,c(2:8)]<-pops[,c(2:8)]/5
pops<-aggregate(.~id,pops,FUN=sum)
pops$id<-as.numeric(pops$id)
pops<-pops[order(pops$id),]
row.names(pops)<-pops$id
pops[,c(2:8)]<-round(pops[,c(2:8)]/50,0)
View(pops)
test_pop<-subset(pops,pops$pop2010<=0)
View(test_pop)
test_grouping<-good_good2[which(good_good2$id == test_pop$id),]
test_grouping<-good_good2[which(good_good2$id in test_pop$id)]
test_grouping<-subset(good_good2,test_pop$id)
test_grouping<-subset(good_good2,id in test_pop$id)
test_grouping<-subset(good_good2,(id in test_pop$id))
test_grouping<-good_good2[good_good2$id %in% test_pop$id]
test_grouping<-good_good2[good_good2$id %in% test_pop$id,]
View(test_grouping)
ggplot(country_f)+geom_map(data=test_grouping,mapping = test_grouping,aes(x=long,y=lat,map_id=id))
ggplot(country_f)+geom_map(data=test_grouping,map = test_grouping,aes(x=long,y=lat,map_id=id))
quartz()
ggplot(country_f)+geom_map(data=test_grouping,map = test_grouping,aes(x=long,y=lat,map_id=id))
quartz()
ggplot(country_f)+geom_map(data=test_grouping,map = test_grouping,aes(x=long,y=lat,map_id=id))
plot(x=c(1:10))
ggplot(country_f)+geom_map(data=test_grouping,map = test_grouping,aes(x=long,y=lat,map_id=id))
sum(test_grouping$pop2010)
test_grouping<-pops[pops$id %in% test_pop$id,]
pops<-good_good2[,c(6,10:16)]
pops[,c(2:8)]<-pops[,c(2:8)]/5
pops<-aggregate(.~id,pops,FUN=sum)
test_grouping<-pops[pops$id %in% test_pop$id,]
pops<-good_good2[,c(6,10:16)]
View(pops)
pops[,c(2:8)]<-pops[,c(2:8)]/5
pops<-aggregate(.~id,pops,FUN=sum)
pops$id<-as.numeric(pops$id)
pops<-pops[order(pops$id),]
row.names(pops)<-pops$id
test_grouping<-pops[pops$id %in% test_pop$id,]
sum(test_grouping$pop2010)
View(lbr_data_final)
test<-good_good2[,c(1:9)]
test_grouping<-left_join(test,test_grouping,by = id)
test_grouping<-left_join(test,test_grouping,by = c("id"="id"))
test$id<-as.numeric(test$id)
test_grouping<-left_join(test,test_grouping,by = c("id"="id"))
View(test_grouping)
test_grouping<-right_join(test,test_grouping,by = c("id"="id"))
test_grouping<-pops[pops$id %in% test_pop$id,]
sum(test_grouping$pop2010)
test<-good_good2[,c(1:9)]
test$id<-as.numeric(test$id)
test_grouping<-right_join(test,test_grouping,by = c("id"="id"))
View(test_pop)
View(test_grouping)
pops<-good_good2[,c(6,10:16)]
pops[,c(2:8)]<-pops[,c(2:8)]/5
pops2<-aggregate(.~id,pops,FUN=sum)
View(pops2)
pops2$id<-as.numeric(pops2$id)
pops2<-pops2[order(pops2$id),]
row.names(pops2)<-pops2$id
test_pop<-subset(pops2,pops2$pop2010<=0)
test_grouping<-pops[pops$id %in% test_pop$id,]
pops2[,c(2:8)]<-round(pops2[,c(2:8)]/50,0)
test_pop<-subset(pops2,pops2$pop2010<=0)
test_grouping<-pops[pops$id %in% test_pop$id,]
sum(test_grouping$pop2010)
test<-good_good2[,c(1:9)]
test$id<-as.numeric(test$id)
test_grouping<-right_join(test,test_grouping,by = c("id"="id"))
test<-good_good2[,c(1:9)]
test_grouping<-right_join(test,test_grouping,by = c("id"="id"))
pops<-good_good2[,c(6,10:16)]
pops[,c(2:8)]<-pops[,c(2:8)]/5
pops2<-aggregate(.~id,pops,FUN=sum)
pops2$id<-as.numeric(pops2$id)
pops2<-pops2[order(pops2$id),]
row.names(pops2)<-pops2$id
pops2[,c(2:8)]<-round(pops2[,c(2:8)]/50,0)
test_pop<-subset(pops2,pops2$pop2010<=0)
test_grouping<-pops[pops$id %in% test_pop$id,]
sum(test_grouping$pop2010)
test<-good_good2[,c(1:9)]
test_grouping<-pops2[pops2$id %in% test_pop$id,]
test<-good_good2[,c(1:9)]
test_grouping<-right_join(test,test_grouping,by = c("id"="id"))
test$id<-as.numeric(test$id)
test_grouping<-right_join(test,test_grouping,by = c("id"="id"))
View(test_grouping)
chull(test_grouping$long,test_grouping$lat)
x<-chull(test_grouping$long,test_grouping$lat)
plot(x)
poly<-test_grouping[which(test_grouping$id %in% x)]
poly<-test_grouping[which(test_grouping$id %in% x),]
View(poly)
poly<-test_grouping[x,]
View(poly)
plot(poly)
ggplot()+geom_polygon(data=ploy,aes(x=long,y=lat))
ggplot()+geom_polygon(data=poly,aes(x=long,y=lat))
ggplot(country_f)+geom_map(data=test_grouping,map = test_grouping,aes(x=long,y=lat,map_id=id))
7.001112+.5
7.001112-.5
-9.471618+.5
-9.471618-.5
gabargna<-subset(good_good2, ((good_good2$long>=-9.971618 & good_good2$long<=-8.971618) & (good_good2$lat>=-6.501112 & good_good2$lat<=-7.501112)))
gabargna<-subset(good_good2, ((good_good2$long>=-9.971618 & good_good2$long<=-8.971618) | (good_good2$lat>=-6.501112 & good_good2$lat<=-7.501112)))
gabargna<-subset(good_good2, ((good_good2$long>=-9.971618 & good_good2$long<=-8.971618) & (good_good2$lat>=6.501112 & good_good2$lat<=7.501112)))
gpplot()+geom_map(data=gabargna,map=gabargna,as(x=long,y=lat,map_id=id))
ggplot()+geom_map(data=gabargna,map=gabargna,as(x=long,y=lat,map_id=id))
-9.971618
ggplot()+geom_map(data=gabargna,map=gabargna,aes(x=long,y=lat,map_id=id))
View(city_points)
point<-data.frame(long=-9.471618,lat=7.001112)
ggplot()+geom_map(data=gabargna,map=gabargna,aes(x=long,y=lat,map_id=id))+geom_point(data = point,aes(x=long,y=lat))
rm(list=ls())
setwd("~/GitHub/Liberia")
library(rgdal)
library(dplyr)
library(rgeos)
library(ggmap)
library(raster)
library(spatstat)
library(maptools)
library(sp)
library(foreign)
library(knitr)
library(gridExtra)
library(rasterVis)
library(colorspace)
library(mapdata)
library(rgl)
library(scales)
library(plot3Drgl)
library(akima)
country<-readOGR(dsn="shapefiles", layer="liberia_revised",stringsAsFactors=FALSE, verbose=FALSE)
cnty<-readOGR(dsn = "shapefiles",layer="counties",stringsAsFactors = FALSE,verbose=FALSE)
dist<-readOGR(dsn="shapefiles",layer="districts", stringsAsFactors = FALSE,verbose = FALSE)
clan<-readOGR(dsn="shapefiles",layer="clans", stringsAsFactors = FALSE,verbose = FALSE)
country<-spTransform(country, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
cnty<-spTransform(cnty, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
dist<-spTransform(dist, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
clan<-spTransform(clan, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
country_f<-fortify(country)
cnty_f<-fortify(cnty)
dist_f<-fortify(dist)
clan_f<-fortify(clan)
gpw4_2000<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2000.tif")
gpw4_2000<-crop(gpw4_2000,extent(country))
gpw4_2005<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2005.tif")
gpw4_2005<-crop(gpw4_2005,extent(country))
gpw4_2010<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2010.tif")
gpw4_2010<-crop(gpw4_2010,extent(country))
gpw4_2015<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2015.tif")
gpw4_2015<-crop(gpw4_2015,extent(country))
growth_00_05<-overlay(gpw4_2000,gpw4_2005,fun=function(r1,r2){return((r2-r1)/r1)})
growth_05_10<-overlay(gpw4_2005,gpw4_2010,fun=function(r1,r2){return((r2-r1)/r1)})
growth_10_15<-overlay(gpw4_2010,gpw4_2015,fun=function(r1,r2){return((r2-r1)/r1)})
load("lbr_data_final.RData")
load("gpw4_lbr_spdf.RData")
load("complete_data.RData")
load("points_df_10percent.RData")
load("city_points.RData")
point<-data.frame(long=-9.471618,lat=7.001112)
gabargna<-subset(good_good2, ((good_good2$long>=-9.971618 & good_good2$long<=-8.971618) &
(good_good2$lat>=6.501112 & good_good2$lat<=7.501112)))
ggplot()+geom_map(data=gabargna,map=gabargna,aes(x=long,y=lat,map_id=id))+geom_point(data = point,aes(x=long,y=lat))
quart()
ggplot()+geom_map(data=gabargna,map=gabargna,aes(x=long,y=lat,map_id=id))+geom_point(data = point,aes(x=long,y=lat))
quartz()
ggplot()+geom_map(data=gabargna,map=gabargna,aes(x=long,y=lat,map_id=id))+geom_point(data = point,aes(x=long,y=lat))
View(gabargna)
g_pops<-gabargna[,c(6,10:16)]
View(g_pops)
View(gabargna)
g_pops[,c(2:8)]<-g_pops[,c(2:8)]/5
g_pops<-aggregate(.~id,g_pops,FUN=sum)
g_pops$id<-as.numeric(g_pops$id)
g_pops<-g_pops[order(g_pops$id),]
row.names(g_pops)<-g_pops$id
g_pops<-gabargna[,c(6,10:16)]
g_pops[,c(2:8)]<-g_pops[,c(2:8)]/5
g_pops<-aggregate(.~id,g_pops,FUN=sum)
g_pops$id<-as.numeric(g_pops$id)
g_pops<-g_pops[order(g_pops$id),]
row.names(g_pops)<-g_pops$id
point<-data.frame(long=-9.471618,lat=7.001112)
gabargna<-subset(good_good2, ((good_good2$long>=-9.971618 & good_good2$long<=-8.971618) &
(good_good2$lat>=6.501112 & good_good2$lat<=7.501112)))
quartz()
ggplot()+geom_map(data=gabargna,map=gabargna,aes(x=long,y=lat,map_id=id))+geom_point(data = point,aes(x=long,y=lat))
g_pops<-gabargna[,c(6,10:16)]
g_pops[,c(2:8)]<-g_pops[,c(2:8)]/5
g_pops<-aggregate(.~id,g_pops,FUN=sum)
g_pops$id<-as.numeric(g_pops$id)
g_pops<-g_pops[order(g_pops$id),]
row.names(g_pops)<-g_pops$id
g_pop_list<-g_pops[,4]
sum(pop_list)
sum(g_pops[,4])
m_final<-matrix(nrow=0,ncol=3)
for (i in 1:13402){
if (g_pops[i,4] > 0){
sub<-good_good2[(1+(5*(i-1))):(5*i),]
m1<-matrix(nrow=0,ncol=3)
while(nrow(m1) < g_pops[i,4]) {
m2<-matrix(nrow=100,ncol=3)
m2[,1]<-runif(100,max=(max(sub$long,na.rm=T)+.00000001),min = (min(sub$long,na.rm=T)-.00000001))
m2[,2]<-runif(100,max=(max(sub$lat,na.rm=T)+.00000001),min = (min(sub$lat,na.rm=T)-.00000001))
m2[,3]<-point.in.polygon(m2[,1],m2[,2],sub$long,sub$lat)
m2<-subset(m2, m2[,3]>0)
m1<-rbind(m1,m2)
m1<-unique(m1)
}
m1<-m1[1:g_pops[i,4],]
m_final<-rbind(m_final,m1)
}
}
g_pops<-gabargna[,c(6,10:16)]
ids<-unique(gabargna$id)
gabargna<-good_good2[good_good2$id %in% ids]
gabargna<-good_good2[good_good2$id %in% ids,]
View(gabargna)
save(gabargna,file="gabargna.RData")
ggplot()+geom_map(data=gabargna,map=gabargna,aes(x=long,y=lat,map_id=id))+geom_point(data = point,aes(x=long,y=lat))
g_pops<-gabargna[,c(6,10:16)]
g_pops[,c(2:8)]<-g_pops[,c(2:8)]/5
g_pops<-aggregate(.~id,g_pops,FUN=sum)
g_pops$id<-as.numeric(g_pops$id)
g_pops<-g_pops[order(g_pops$id),]
row.names(g_pops)<-g_pops$id
g_pops[,c(2:8)]<-round(g_pops[,c(2:8)]/10,0)
g_pop_list<-g_pops[,4]
sum(g_pop_list)
sum(g_pops[,4])
View(gabargna)
m_final<-matrix(nrow=0,ncol=3)
for (i in 1:13402){
if (g_pops[i,4] > 0){
sub<-gabargna[(1+(5*(i-1))):(5*i),]
m1<-matrix(nrow=0,ncol=3)
while(nrow(m1) < g_pops[i,4]) {
m2<-matrix(nrow=100,ncol=3)
m2[,1]<-runif(100,max=(max(sub$long,na.rm=T)+.00000001),min = (min(sub$long,na.rm=T)-.00000001))
m2[,2]<-runif(100,max=(max(sub$lat,na.rm=T)+.00000001),min = (min(sub$lat,na.rm=T)-.00000001))
m2[,3]<-point.in.polygon(m2[,1],m2[,2],sub$long,sub$lat)
m2<-subset(m2, m2[,3]>0)
m1<-rbind(m1,m2)
m1<-unique(m1)
}
m1<-m1[1:g_pops[i,4],]
m_final<-rbind(m_final,m1)
}
}
View(m_final)
gabargna_points_df<-m_final
save(gabargna_points_df,file="gabargna_points_df.RData")
ppp_gabargna<-ppp(m_final[,1],m_final[,2])
win<- owin(xrange=c(-9.975,-8.966667),yrange=c(6.5,7.508333))
ppp_gabargna<-ppp(m_final[,1],m_final[,2],window=win)
summary(ppp_gabargna)
plot(ppp_gabargna,chars=".")
dens_10percent<-density(ppp_10percent,eps=.008333)
dens_gabargna<-density(ppp_gabargna,eps=.008333)
summary(dens_gabargna)
plot(dens_gabargna)
dens_gabargna<-density(ppp_gabargna,eps=.008333)
summary(dens_gabargna)
plot(dens_gabargna)
ppm_gabargna<-ppm(ppp_gabargna,~dens,covariates = list(dens=dens_gabargna))
sim_gabargna<-simulate(ppm_gabargna,nsim = 10)
plot(sim_gabargna)
plot(sim_gabargna,chars=".")
plot(density(sim_gabargna))
plot(quadratcount(ppp_gabargna,nx=100,ny=100))
plot(quadratcount(ppp_gabargna))
quadratcount(ppp_gabargna)
quadratcount(ppp_gabargna)
ppp_gabargna<-ppp(m_final[,1],m_final[,2],window=win)
summary(ppp_gabargna)
plot(ppp_gabargna,chars=".")
quadratcount(ppp_gabargna)
quadratcount.ppp(ppp_gabargna)
quadratcount.ppp(ppp_gabargna)
quadratcount.ppp(ppp_gabargna)
quadratcount(ppp_gabargna)
quadratcount(ppp_gabargna,nx=2,ny=2)
rectquadrat.countEngine
win1<-owin(xrange = c(0,1),yrange = c(0,1))
ppp1<-rpoint(14,win=win1)
win2<-owin(c(-1,0),c(0,1))
ppp2<-rpoint(45,win=win2)
win3<-owin(xrange = c(-1,0),yrange = c(-1,0))
ppp3<-rpoint(25,win=win3)
win4<-owin(c(0,1),c(-1,0))
ppp4<-rpoint(10,win=win4)
win_total<-owin(c(-1,1),c(-1,1))
ppp_total<-superimpose(ppp1,ppp2,ppp3,ppp4,W=win_total)
plot(ppp_total)
dens<-density(ppp_total)
plot(dens)
summary(dens)
ppm1<-ppm(ppp_total,~1)
ppm2<-update(ppm1,~dens,covariates=list(dens=dens))
ppm3<-update(ppm2,ppp_total~dens,covariates=list(dens=dens))
quadratcount(ppp_total)
plot(quadratcount(ppp_total))
plot(ppp_gabargna,chars=".")
plot(dens_gabargna)
ggplot()+geom_map(data=gabargna,map=gabargna,aes(x=long,y=lat,map_id=id))+geom_point(data = point,aes(x=long,y=lat))
ggplot()+geom_map(data=gabargna,map=gabargna,aes(x=long,y=lat,map_id=id))+geom_point(data = point,aes(x=long,y=lat))+geom_map(data=clans_f,map=clans_f,aes(x=long,y=lat,map_id=id))
ggplot()+geom_map(data=gabargna,map=gabargna,aes(x=long,y=lat,map_id=id))+geom_point(data = point,aes(x=long,y=lat))+geom_map(data=clan_f,map=clan_f,aes(x=long,y=lat,map_id=id))
plot(ppp_gabargna,chars=".")
View(good_good2)
bong<-clan[which(clan@data$FIRST_CCNA=="Bong")]
bong<-clan[which(clan@data$FIRST_CCNA=="Bong"),]
jorquelleh<-clan[which(clan@data$FIRST_DNAM=="Jorquelleh"),]
jorquelleh_df<-extract(gpw4_2010,jorquelleh)
jorquelleh_df<-extract(gpw4_2010,jorquelleh,df=T)
View(jorquelleh_df)
