x[[1]][1]
m<-lapply(1:length(x),function(j) mean(x[[1]][[j]]))
x<-list(seq(0,100))
means<-list()
for (i in 1:3){
m<-lapply(1:length(x[[i]]),function(j) mean(x[[j]]))
means<-c(means,m)
x<-lapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
x<-list(seq(0,100))
means<-list()
m<-lapply(1:length(x[[i]]),function(j) mean(x[[j]]))
x<-list(seq(0,100))
means<-list()
for (i in 1:3){
m<-lapply(1:length(x),function(j) (lapply(1:length(x[[j]], function(h) mean(x[[h]])))))
means<-c(means,m)
x<-lapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
x<-list(seq(0,100))
means<-list()
m<-lapply(1:length(x),function(j) (lapply(1:length(x[[j]], function(h) mean(x[[h]])))))
x<-list(seq(0,100))
length(x)
x<-list(seq(0,100))
means<-list()
m<-lapply(1:length(x),function(j) (lapply(1:length(x[[j]]), function(h) mean(x[[h]]))))
x<-list(seq(0,100))
means<-list()
m<-lapply(1:length(x),function(j) (lapply(1:length(x[[j]]), function(h) mean(x))))
wanrings
warnings()
x<-list(seq(0,100))
means<-list()
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-lapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
x<-list(seq(0,100))
means<-list()
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
x<-list(seq(0,100))
means<-list()
for (i in 1:3){
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
x<-list(seq(0,100))
means<-list()
for (i in 1:4){
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
x<-list(seq(0,100))
means<-list()
for (i in 1:7){
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
x<-list(seq(0,100))
means<-list()
for (i in 1:6){
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
sort(means)
x<-list(seq(0,100))
means<-list()
for (i in 1:6){
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,list(m))
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
sort(means)
x<-list(seq(0,100))
means<-vector()
for (i in 1:6){
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,vector(m))
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
x<-list(seq(0,100))
means<-vector()
for (i in 1:6){
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,as.vector(m))
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
x<-list(seq(0,100))
means<-vector()
for (i in 1:6){
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
sort(as.vector(means))
as.vector(means))
as.vector(means)
x<-list(seq(0,100))
means<-vector()
m<-lapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-list(seq(0,100))
means<-vector()
m<-sapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
m<-sapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
x<-list(seq(0,100))
means<-vector()
for (i in 1:6){
m<-sapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
sort(means)
x<-list(seq(0,1000))
means<-vector()
for (i in 1:8){
m<-sapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
sort(means)
x<-list(seq(0,1000))
means<-vector()
for (i in 1:5){
m<-sapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
sort(means)
means<-c(min(x),means,max(x))
x<-vector(seq(0,1000))
x<-seq(0,1000)
means<-c(min(x),means,max(x))
x<-list(seq(0,1000))
means<-vector()
for (i in 1:5){
m<-sapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
means<-sort(means)
x<-seq(0,1000)
means<-c(min(x),means,max(x))
means
x<-seq(0,100)
means<-vector()
for (i in 1:2){
m<-sapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
means<-sort(means)
means<-c(min(x),means,max(x))
x<-seq(0,100)
means<-vector()
for (i in 1:2){
m<-sapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
x<-list(seq(0,100))
means<-vector()
for (i in 1:2){
m<-sapply(1:length(x),function(j) mean(x[[j]]))
means<-c(means,m)
x<-sapply(1:length(m), function(h) {list(x[[h]][which((x[[h]]>m[[h]]))], x[[h]][which((x[[h]]<=m[[h]]))])})
}
means<-sort(means)
x<-seq(0,100)
means<-c(min(x),means,max(x))
means
x<-seq(0,100)
means<-vector()
x<-seq(0,100)
y<-list(x)
for (i in 1:2){
m<-sapply(1:length(y),function(j) mean(y[[j]]))
means<-c(means,m)
y<-sapply(1:length(m), function(h) {list(y[[h]][which((y[[h]]>=m[[h]]))], y[[h]][which((y[[h]]<=m[[h]]))])})
}
means<-sort(means)
means<-c(min(x),means,max(x))
means
score<-sapply(1:length(x),function(i) {lapply(1:length(means-1),function(j) x[[i]][which(x>=means[j] & x<=means[j+1])])})
score<-sapply(1:length(x),function(i) {lapply(1:length(means-1),function(j) x[[i]][which(x>=means[j] & x<=means[j+1])]<-j)})
score<-sapply(1:length(x),function(i) {sapply(1:length(means-1),function(j) x[[i]][which(x>=means[j] & x<=means[j+1])])})
View(score)
score<-sapply(1:length(x),function(i) {sapply(1:length(means-1),function(j) if (x[[i]]>=means[j] & x[[i]]<=means[j+1]){j})})
score<-sapply(1:length(x),function(i) {sapply(1:length(means-1),function(j) {if (x[[i]]>=means[j] & x[[i]]<=means[j+1]){j}})})
score<-sapply(1:length(x),function(i) {sapply(1:length(means-1),function(j) {if (x[[i]]>=means[j] & x[[i]]<=means[j+1]){return(j)}})})
score<-sapply(1:length(x),function(i) {sapply(1:length(means-1),function(j) {if (x[i]>=means[j] & x[i]<=means[j+1])return(j)})})
score<-sapply(1:length(x),function(i) {sapply(1:length(means-1),function(j) x[i]>=means[j] & x[i]<=means[j+1])})
View(score)
means
score<-sapply(1:length(x),function(i) {lapply(1:length(means-1),function(j) x[i]>=means[j] & x[i]<=means[j+1])})
lapply(1:length(means-1),function(j) x[i]>=means[j] & x[i]<=means[j+1])
lapply(1:length(means),function(j) x[i]>=means[j] & x[i]<=means[j+1])
lapply(1:length(means-2),function(j) x[i]>=means[j] & x[i]<=means[j+1])
lapply(1:length(means)-1,function(j) x[i]>=means[j] & x[i]<=means[j+1])
length(means)-1
lapply(1:length(means)-2,function(j) x[i]>=means[j] & x[i]<=means[j+1])
lapply(1:length(means)-1,function(j) x[1]>=means[j] & x[1]<=means[j+1])
lapply(1:length(means),function(j) x[1]>=means[j] & x[1]<=means[j+1])
lapply(1:(length(means)-1),function(j) x[1]>=means[j] & x[1]<=means[j+1])
lapply(1:(length(means)-1),function(j) x[i]>=means[j] & x[i]<=means[j+1])
lapply(1:(length(means)-1),function(j) if (x[i]>=means[j] & x[i]<=means[j+1]){j})
lapply(1:(length(means)-1),function(j) if (x[50]>=means[j] & x[50]<=means[j+1]){j})
lapply(1:(length(means)-1),function(j) if (x[51]>=means[j] & x[51]<=means[j+1]){j})
lapply(1:(length(means)-1),function(j) if (x[52]>=means[j] & x[52]<=means[j+1]){j})
lapply(1:(length(means)-1),function(j) if (x[51]>means[j] & x[51]<=means[j+1]){j})
rm(list=ls())
setwd("~/GitHub/Liberia")
quartz()
library(rgdal)
library(dplyr)
library(rgeos)
library(ggmap)
library(raster)
library(spatstat)
library(maptools)
library(sp)
library(foreign)
library(knitr)
library(gridExtra)
library(rasterVis)
library(colorspace)
library(mapdata)
library(rgl)
library(scales)
library(plot3Drgl)
library(akima)
library(SpaDES)
lbr<-readOGR(dsn="shapefiles/LBR_shp", layer="liberia_revised",stringsAsFactors=FALSE, verbose=FALSE)
lbr_cnty<-readOGR(dsn = "shapefiles/LBR_shp",layer="counties",stringsAsFactors = FALSE,verbose=FALSE)
lbr_dist<-readOGR(dsn="shapefiles/LBR_shp",layer="districts", stringsAsFactors = FALSE,verbose = FALSE)
lbr_clan<-readOGR(dsn="shapefiles/LBR_shp",layer="clans", stringsAsFactors = FALSE,verbose = FALSE)
lbr<-spTransform(lbr, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
lbr_cnty<-spTransform(lbr_cnty, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
lbr_dist<-spTransform(lbr_dist, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
lbr_clan<-spTransform(lbr_clan, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
lbr_f<-fortify(lbr)
lbr_cnty_f<-fortify(lbr_cnty)
lbr_dist_f<-fortify(lbr_dist)
lbr_clan_f<-fortify(lbr_clan)
x<-seq(0,100)
y<-list(x)
means<-vector()
for (i in 1:2){
m<-sapply(1:length(y),function(j) mean(y[[j]]))
means<-c(means,m)
y<-sapply(1:length(m), function(h) {list(y[[h]][which((y[[h]]>=m[[h]]))], y[[h]][which((y[[h]]<=m[[h]]))])})
}
means<-sort(means)
means<-c(min(x),means,max(x))
means
lapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]){j})
lapply(1:(length(means)-1),function(j) ifelse(x[i]>means[j] & x[i]<=means[j+1],j,next))
lapply(1:(length(means)-1),function(j) ifelse(x[i]>means[j] & x[i]<=means[j+1],j,NA))
lapply(1:(length(means)-1),function(j) ifelse(x[i]>means[j] & x[i]<=means[j+1],j,break))
lapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]){j} else {next})
1:10 %in% c(1,3,5,9)
score<-sapply(1:length(x),function(i) {lapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]) {j})})
View(score)
score<-lapply(1:length(x),function(i) {lapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]) {j})})
score<-apply(1:length(x),function(i) {lapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]) {j})})
score<-sapply(1:length(x),function(i) {lapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]) {j})})
sapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]) {j})
score<-sapply(1:length(x),function(i) {sapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]) {j})})
View(score)
score<-sapply(1:length(x),function(i) {vapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]) {j})})
sapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]) {j})
x<-sapply(1:(length(means)-1),function(j) if (x[i]>means[j] & x[i]<=means[j+1]) {j})
load("ppp_points_df.RData")
ppp_10percent<-ppp(m_final[,1],m_final[,2],window=win)
win<-as(lbr,"owin")
ppp_10percent<-ppp(m_final[,1],m_final[,2],window=win)
ppp_10percent<-ppp(points_df_10percent[,1],points_df_10percent[,2],window=win)
summary(ppp_10percent)
plot(ppp_10percent,chars=".")
plot(ppp_10percent,chars=".")
dens_10percent<-density(ppp_10percent,eps=.008333)
summary(dens_10percent)
plot(dens_10percent)
plot(ppp_10percent)
plot(pixelate(ppp_10percent))
plot(pixellate(ppp_10percent))
plot(dens_10percent)
contour(dens_10percent)
plot(dens_10percent)
high_low_lbr_med<-high_low_lbr
high_low_lbr<-data.frame(cell=cellsFromExtent(gpw4_2010,lbr), pop=getValues(gpw4_2010))
high_low_lbr$long<-xFromCell(gpw4_2010,high_low_lbr$cell)
lights<-raster("~Downloads/F182010.v4/F182010.v4d_web.stable_lights.avg_vis.tif")
lights<-raster("~/Downloads/F182010.v4/F182010.v4d_web.stable_lights.avg_vis.tif")
plot(lights)
lbr_lights<-crop(lights,extent(lbr))
plot(lbr_lights)
gplot(lbr_lights)+geom_tile(fill=value)+
geom_map(data=lbr_dist_f,map=lbr_dist_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)+
ggtitle("High Low with Means")
gplot(lbr_lights)+geom_tile(aes(fill=value))+
geom_map(data=lbr_dist_f,map=lbr_dist_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
getValues(lbr_lights)
x<-getValues(lbr_lights)
x<-as.matrix(getValues(lbr_lights))
View(x)
libr_lghtsP <- lbr_lights > 0
gplot(libr_lghtsP)+geom_tile(aes(fill=value))+
geom_map(data=lbr_dist_f,map=lbr_dist_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
gplot(libr_lghtsP)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_dist_f,map=lbr_dist_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
gplot(libr_lghtsP)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_f,map=lbr_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
gplot(libr_lghtsP)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
lights2<-raster("~/Downloads/F182010.v4/F182010.v4d_web.cf_cvg.tif")
lbr_lights2<-crop(lights,extent(lbr))
plot(lbr_lights2)
quartz()
lights<-raster("~/Downloads/F182010.v4/F182010.v4d_web.stable_lights.avg_vis.tif")
lbr_lights<-crop(lights,extent(lbr))
plot(lbr_lights)
libr_lghtsP2 <- lbr_lights2 > 0
gplot(libr_lghtsP2)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
quartz()
lights<-raster("~/Downloads/F182010.v4/F182010.v4d_web.stable_lights.avg_vis.tif")
lbr_lights<-crop(lights,extent(lbr))
plot(lbr_lights)
gplot(libr_lghtsP)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
x<-as.matrix(getValues(lbr_lights))
quartz()
lights2<-raster("~/Downloads/F182010.v4/F182010.v4d_web.cf_cvg.tif")
lbr_lights2<-crop(lights,extent(lbr))
plot(lbr_lights2)
libr_lghtsP2 <- lbr_lights2 > 0
gplot(libr_lghtsP2)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
x<-getValues(lbr_lights)
x<-getValues(lbr_lights2)
x<-x>0
x<-getValues(lbr_lights)
x<-x[which(x>0)]
x<-getValues(lbr_lights)
x<-x[which(x>0)]
y<-getValues(lbr_lights2)
y<-y[which(y>0)]
lights2<-raster("~/Downloads/F182010.v4/F182010.v4d_web.cf_cvg.tif")
lbr_lights2<-crop(lights,extent(lbr))
plot(lbr_lights2)
libr_lghtsP2 <- lbr_lights2 > 0
gplot(libr_lghtsP2)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
y<-getValues(lbr_lights2)
y<-y[which(y>0)]
lights2<-raster("~/Downloads/F182010.v4/F182010.v4d_web.cf_cvg.tif")
lbr_lights2<-crop(lights2,extent(lbr))
plot(lbr_lights2)
libr_lghtsP2 <- lbr_lights2 > 0
gplot(libr_lghtsP2)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
y<-getValues(lbr_lights2)
y<-y[which(y>0)]
lights2<-raster("~/Downloads/F182010.v4/F182010.v4d_web.cf_cvg.tif")
lbr_lights2<-crop(lights2,extent(lbr))
plot(lbr_lights2)
lights<-raster("~/Downloads/F182010.v4/F182010.v4d_web.stable_lights.avg_vis.tif")
lbr_lights<-crop(lights,extent(lbr))
plot(lbr_lights)
quartz()
lights<-raster("~/Downloads/F182010.v4/F182010.v4d_web.stable_lights.avg_vis.tif")
lbr_lights<-crop(lights,extent(lbr))
plot(lbr_lights)
gplot(libr_lghtsP)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
quartz()
lights<-raster("~/Downloads/F182010.v4/F182010.v4d_web.stable_lights.avg_vis.tif")
lbr_lights<-crop(lights,extent(lbr))
plot(lbr_lights)
quartz()
lights<-raster("~/Downloads/F182010.v4/F182010.v4d_web.stable_lights.avg_vis.tif")
lbr_lights<-crop(lights,extent(lbr))
plot(lbr_lights)
gplot(lbr_lghts)+geom_tile(aes(fill=value))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
gplot(lbr_lights)+geom_tile(aes(fill=value))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
quartz()
lights2<-raster("~/Downloads/F182010.v4/F182010.v4d_web.cf_cvg.tif")
lbr_lights2<-crop(lights2,extent(lbr))
plot(lbr_lights2)
gplot(libr_lghtsP2)+geom_tile(aes(fill=value))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
gplot(lbr_lights2)+geom_tile(aes(fill=value))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
lights0<-lbr_lights>0
gplot(lights0)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
quartz()
lights3<-raster("~/Downloads/F182010.v4/F182010.v4d_web.avg_vis.tif")
lbr_lights3<-crop(lights3,extent(lbr))
plot(lbr_lights3)
gplot(lbr_lights3)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
gplot(lbr_lights3)+geom_tile(aes(fill=value))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
gplot(lbr_lights3)+geom_tile(aes(fill=factor(value)))+
geom_map(data=lbr_cnty_f,map=lbr_cnty_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
test<-raster("~/Documents/wm/year1/monroe_project/LBR-POP/LBR10adjv3.tif")
library(rgdal)
library(dplyr)
library(rgeos)
library(ggmap)
library(raster)
library(spatstat)
library(maptools)
library(sp)
library(foreign)
library(knitr)
library(gridExtra)
library(rasterVis)
library(colorspace)
library(mapdata)
library(rgl)
library(scales)
library(plot3Drgl)
library(akima)
library(SpaDES)
test<-raster("~/Documents/wm/year1/monroe_project/LBR-POP/LBR10adjv3.tif")
high_low_lbr2<-data.frame(cell=cellsFromExtent(test,lbr), pop=getValues(test))
lbr<-readOGR(dsn="shapefiles/LBR_shp", layer="LBR_adm0",stringsAsFactors=FALSE, verbose=FALSE)
test<-raster("~/Documents/wm/year1/monroe_project/LBR-POP/LBR10adjv3.tif")
high_low_lbr2<-data.frame(cell=cellsFromExtent(test,lbr), pop=getValues(test))
high_low_lbr2<-data.frame(cell=cellsFromExtent(test,extent(lbr)), pop=getValues(test))
plot(test2)
plot(test)
plot(log(test)
gpw4_2010
high_low_lbr2<-data.frame(cell=cellsFromExtent(test,lbr), pop=getValues(test))
plot(log(test))
quartz()
plot(log(test))
high_low_lbr2<-data.frame(cell=cellsFromExtent(test,lbr), pop=getValues(test))
lbr<-readOGR(dsn="shapefiles/LBR_shp", layer="LBR_adm0",stringsAsFactors=FALSE, verbose=FALSE)
test<-raster("~/Documents/wm/year1/monroe_project/LBR-POP/LBR10adjv3.tif")
high_low_lbr2<-data.frame(cell=cellsFromExtent(test,lbr), pop=getValues(test))
cellsFromExtent(test,lbr)
x<-cellsFromExtent(test,lbr)
na.rm(x)
x<-matrix(cellsFromExtent(test,lbr))
View(x)
unique(x)
x<-data.frame(getValues(test))
x<-getValues(test)
y<-cellsFromExtent(test,lbr)
y<-cellsFromExtent(test,lbr)
x<-getValues(test,na.rm)
x<-getValues(test,na.rm=T)
x<-na.omit(getValues(test))
x<-getValues(test)
high_low_lbr2<-data.frame(cell=cellsFromExtent(test,lbr,expand=T), pop=getValues(test))
proj4string(test)
proj4string(lbr)
z<-extract(test,lbr)
z<-calc(test,fun=quantile)
e^Inf
lbr<-readOGR(dsn="shapefiles/LBR_shp", layer="LBR_adm0",stringsAsFactors=FALSE, verbose=FALSE)
lbr_f<-fortify(lbr)
gplot(test)+geom_tile(eas(fill=value))+geom_map(data=lbr_f,map=lbr_f,aes(x=long,y=lat,map_id=id))
quartz()
gplot(test)+geom_tile(aes(fill=value))+geom_map(data=lbr_f,map=lbr_f,aes(x=long,y=lat,map_id=id))
gplot(test)+geom_tile(aes(fill=value))+geom_map(data=lbr_f,map=lbr_f,aes(x=long,y=lat,map_id=id),,alpha=0,col="black",cex=.1)
gplot(test)+geom_tile(aes(fill=value))+geom_map(data=lbr_f,map=lbr_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
lbr2<-readOGR(dsn = "shapefiles/tyler_LBR",layer="liberia_revised",stringsAsFactors = FALSE,verbose=FALSE)
lbr2<-spTransform(lbr, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
lbr2_f<-fortify(lbr2)
quartz()
gplot(test)+geom_tile(aes(fill=value))+geom_map(data=lbr2_f,map=lbr2_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
high_low_lbr2<-data.frame(cell=cellsFromExtent(test,lbr2), pop=getValues(test,cellsFromExtent(test,lbr2)))
high_low_lbr2<-data.frame(cell=cellsFromExtent(test,lbr2), pop=getValues(test))
lbr2<-spTransform(lbr2, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
lbr2_f<-fortify(lbr2)
quartz()
source('~/GitHub/Liberia/script_4.R', echo=TRUE)
gplot(test)+geom_tile(aes(fill=value))+geom_map(data=lbr2_f,map=lbr2_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
rm(list=ls())
setwd("~/GitHub/Liberia")
lbr<-readOGR(dsn="shapefiles/LBR_shp", layer="LBR_adm0",stringsAsFactors=FALSE, verbose=FALSE)
lbr2<-readOGR(dsn = "shapefiles/tyler_LBR",layer="liberia_revised",stringsAsFactors = FALSE,verbose=FALSE)
lbr2<-spTransform(lbr2, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
lbr_f<-fortify(lbr)
lbr2_f<-fortify(lbr2)
test<-raster("~/Documents/wm/year1/monroe_project/LBR-POP/LBR10adjv3.tif")
gplot(test)+geom_tile(aes(fill=value))+geom_map(data=lbr2_f,map=lbr2_f,aes(x=long,y=lat,map_id=id),alpha=0,col="black",cex=.1)
high_low_lbr2<-data.frame(cell=cellsFromExtent(test,lbr2), pop=getValues(test))
