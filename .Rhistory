data5<-na.omit(data5)
colnames(data4)<-c("long","lat","growth00_05")
colnames(data4)<-c("long","lat","pop2015")
colnames(data5)<-c("long","lat","growth00_05")
data<-cbind(xyFromCell(gpw4_2000,1:ncell(gpw4_2000)),getValues(gpw4_2000))
data<-na.omit(data)
colnames(data)<-c("long","lat","pop2000")
data2<-cbind(xyFromCell(gpw4_2005,1:ncell(gpw4_2005)),getValues(gpw4_2005))
data2<-na.omit(data2)
colnames(data2)<-c("long","lat","pop2005")
data3<-cbind(xyFromCell(gpw4_2010,1:ncell(gpw4_2010)),getValues(gpw4_2010))
data3<-na.omit(data3)
colnames(data3)<-c("long","lat","pop2010")
data4<-cbind(xyFromCell(gpw4_2015,1:ncell(gpw4_2015)),getValues(gpw4_2015))
data4<-na.omit(data4)
colnames(data4)<-c("long","lat","pop2015")
data5<-cbind(xyFromCell(growth_00_05,1:ncell(growth_00_05)),getValues(growth_00_05))
data5<-na.omit(data5)
colnames(data5)<-c("long","lat","growth05")
data6<-cbind(xyFromCell(growth_05_10,1:ncell(growth_05_10)),getValues(growth_05_10))
data6<-na.omit(data6)
colnames(data6)<-c("long","lat","growth10")
data7<-cbind(xyFromCell(growth_10_15,1:ncell(growth_10_15)),getValues(growth_10_15))
data7<-na.omit(data7)
colnames(data7)<-c("long","lat","growth15")
data_final<-merge(data,data2,by=c("long","lat"))
data_final<-merge(data_final,data3,by=c("long","lat"))
data_final<-merge(data_final,data4,by=c("long","lat"))
data_final<-merge(data_final,data5,by=c("long","lat"))
data_final<-merge(data_final,data6,by=c("long","lat"))
data_final<-merge(data_final,data7,by=c("long","lat"))
data_final[,7]<-1
data<-cbind(xyFromCell(gpw4_2000,1:ncell(gpw4_2000)),getValues(gpw4_2000))
data<-na.omit(data)
colnames(data)<-c("long","lat","pop2000")
data2<-cbind(xyFromCell(gpw4_2005,1:ncell(gpw4_2005)),getValues(gpw4_2005))
data2<-na.omit(data2)
colnames(data2)<-c("long","lat","pop2005")
data3<-cbind(xyFromCell(gpw4_2010,1:ncell(gpw4_2010)),getValues(gpw4_2010))
data3<-na.omit(data3)
colnames(data3)<-c("long","lat","pop2010")
data4<-cbind(xyFromCell(gpw4_2015,1:ncell(gpw4_2015)),getValues(gpw4_2015))
data4<-na.omit(data4)
colnames(data4)<-c("long","lat","pop2015")
data5<-cbind(xyFromCell(growth_00_05,1:ncell(growth_00_05)),getValues(growth_00_05))
data5<-na.omit(data5)
colnames(data5)<-c("long","lat","growth05")
data6<-cbind(xyFromCell(growth_05_10,1:ncell(growth_05_10)),getValues(growth_05_10))
data6<-na.omit(data6)
colnames(data6)<-c("long","lat","growth10")
data7<-cbind(xyFromCell(growth_10_15,1:ncell(growth_10_15)),getValues(growth_10_15))
data7<-na.omit(data7)
colnames(data7)<-c("long","lat","growth15")
data_final<-merge(data,data2,by=c("long","lat"))
data_final<-merge(data_final,data3,by=c("long","lat"))
data_final<-merge(data_final,data4,by=c("long","lat"))
data_final<-merge(data_final,data5,by=c("long","lat"))
data_final<-merge(data_final,data6,by=c("long","lat"))
data_final<-merge(data_final,data7,by=c("long","lat"))
data_final[,10]<-1
colnames(data_final)[10]<-"id"
ggplot()+geom_map(data=data_final,map=data_final,aes(x=long,y=lat,map_id=id,fill=pop2000))
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id)+geom_map(data=data_final,map=data_final,aes(x=long,y=lat,map_id=id,fill=pop2000))
class(data)
class(data2)
rasterToPolygons
rasterToPoints
####Testing 2.0#####
f<-list.files(path= "~/Documents/W_M/Year_1/2017_Summer/Monroe_Project",pattern="*.tif",recursive=TRUE)
files<-lapply(f, function(i) paste("~/Documents/W_M/Year_1/2017_Summer/Monroe_Project/",i,sep=""))
files<-files[c(1,3)]
gpw4<-stack(lapply(files, function(i) raster(i,band=1)))
test<-raster(files[[2]])
test_val<-getValues(test)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_map(data=data_final,map=data_final,aes(x=long,y=lat,map_id=id,fill=pop2000))
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,map=data_final,aes(x=long,y=lat,fill=pop2000))
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,aes(x=long,y=lat,fill=pop2000))
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,aes(x=long,y=lat,fill=pop2000),cex=.1)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,aes(x=long,y=lat,fill=pop2000),cex=.01)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,aes(x=long,y=lat,fill=pop2000),cex=.001)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,aes(x=long,y=lat,fill=pop2000),cex=.00001)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,aes(x=long,y=lat,fill=pop2000),cex=.0000001)
data_final[,10]<-1:nrow(data_final)
colnames(data_final)[10]<-"id"
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_map(data=data_final,map=data_final,aes(x=long,y=lat,map_id=id,fill=pop2000))
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_map(data=data_final,map=data_final,aes(x=long,y=lat,map_id=id,fill=pop2005))
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapoing=data_final,aes(x=long,y=lat,fill=pop2005),cex=.00001)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=data_final,aes(x=long,y=lat,fill=pop2005),cex=.00001)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=pop2005),cex=.00001)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=log(pop2005)),cex=.00001)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=log(pop2005)),cex=.0000000001)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=log(pop2005),cex=.0001))
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=log(pop2005),size=.001))
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=log(pop2005)),size=.001)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=log(pop2005)),size=.000000000000001)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=log(pop2005)),size=10)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=log(pop2005)),size=.000000000000000000000000000000000001)
plot(x=data_final$long,y=data_final$lat)
plot(x=data_final$long,y=data_final$lat,color=data_final$pop2000)
plot(x=data_final$long,y=data_final$lat,colour=data_final$pop2000)
plot(x=country_f$long,y=country_f$lat)
polygon(x=country_f$long,y=country_f$lat)
plot.new()
polygon(x=country_f$long,y=country_f$lat)
point(x=data_final$long,y=data_final$lat,col = data_final$pop2000)
points(x=data_final$long,y=data_final$lat,col = data_final$pop2000)
plot.new()
points(x=data_final$long,y=data_final$lat,col = data_final$pop2000)
rm(list=ls())
setwd("~/GitHub/Liberia")
library(rgdal)
library(dplyr)
library(rgeos)
library(ggmap)
library(raster)
library(spatstat)
library(maptools)
library(sp)
library(foreign)
library(knitr)
library(gridExtra)
library(rasterVis)
library(colorspace)
library(mapdata)
library(rgl)
library(scales)
country<-readOGR(dsn="shapefiles", layer="liberia_revised",stringsAsFactors=FALSE, verbose=FALSE)
cnty<-readOGR(dsn = "shapefiles",layer="counties",stringsAsFactors = FALSE,verbose=FALSE)
dist<-readOGR(dsn="shapefiles",layer="districts", stringsAsFactors = FALSE,verbose = FALSE)
clan<-readOGR(dsn="shapefiles",layer="clans", stringsAsFactors = FALSE,verbose = FALSE)
country<-spTransform(country, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
cnty<-spTransform(cnty, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
dist<-spTransform(dist, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
clan<-spTransform(clan, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
country_f<-fortify(country)
cnty_f<-fortify(cnty)
dist_f<-fortify(dist)
clan_f<-fortify(clan)
cnty@data$SUM_HH[1]<-20508
dist@data[which(dist@data$FIRST_CCNA=="Bomi"),]$HHOLDS<-dist@data[which(dist@data$FIRST_CCNA=="Bomi"),]$TOTAL/(cnty@data$SUM_TOTAL[1]/cnty@data$SUM_HH[1])
clan@data[which(clan@data$FIRST_CCNA=="Bomi"),]$SUM_HH<-clan@data[which(clan@data$FIRST_CCNA=="Bomi"),]$SUM_TOTAL/(cnty@data$SUM_TOTAL[1]/cnty@data$SUM_HH[1])
clan@data[which(clan@data$FIRST_CCNA=="River Gee"),]$SUM_HH[29]<-clan@data[which(clan@data$FIRST_CCNA=="River Gee"),]$SUM_TOTAL[29]/mean(clan@data[which(clan@data$FIRST_CCNA=="River Gee"),]$SUM_TOTAL[c(1:28,30:45)]/clan@data[which(clan@data$FIRST_CCNA=="River Gee"),]$SUM_HH[c(1:28,30:45)])
gpw4_2000<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2000.tif")
gpw4_2000<-crop(gpw4_2000,extent(country))
gpw4_2000<-mask(gpw4_2000,country)
gpw4_2005<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2005.tif")
gpw4_2005<-crop(gpw4_2005,extent(country))
gpw4_2005<-mask(gpw4_2005,country)
gpw4_2010<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2010.tif")
gpw4_2010<-crop(gpw4_2010,extent(country))
gpw4_2010<-mask(gpw4_2010,country)
gpw4_2015<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2015.tif")
gpw4_2015<-crop(gpw4_2015,extent(country))
gpw4_2015<-mask(gpw4_2015,country)
growth_00_05<-overlay(gpw4_2000,gpw4_2005,fun=function(r1,r2){return((r2-r1)/r1)})
growth_05_10<-overlay(gpw4_2005,gpw4_2010,fun=function(r1,r2){return((r2-r1)/r1)})
growth_10_15<-overlay(gpw4_2010,gpw4_2015,fun=function(r1,r2){return((r2-r1)/r1)})
test<-as.data.frame(gpw4_2000)
View(test)
test<-na.omit(test)
View(test)
coords<-coordinates(gpw4_2000)
View(coords)
fortify
fortify
UseMethod(fortify)
ggplot2::fortify
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=log(pop2005)),size=.000000000000000000000000000000000001)
gplot(gpw4_2000)
gplot(gpw4_2000)+geom_map(data+country_f,map=country_f,aes(x=long,y=lat,map_id=id)))
gplot(gpw4_2000)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id)))
gplot(gpw4_2000)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))
gplot(gpw4_2000)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))
x<-get_map("liberia")
x
ggplot(x)
ggmap(x)
ggmap(x)+gplot(gpw4_2000)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))+
class(data)
ggmap(x)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))+
class(data)
ggmap(x)+
gplot(gpw4_2000)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))+
class(data)
ggmap(x)+
gplot(gpw4_2000)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))
ggmap(x)+
gplot(gpw4_2000)#+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))
x<-get_map("liberia")
ggmap(x)+
gplot(gpw4_2000)#+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))
plot.new()
ggmap(x)+
gplot(gpw4_2000)#+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))
gplot(gpw4_2000)#+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))
gplot(gpw4_2000)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))
gplot(growth_00_05)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))
city_points<-read.csv("liberia_city_names.csv")
View(city_points)
gplot(growth_00_05)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))+geom_point(data=city_points,aes(x=Longitude,y=Latitiude))
gplot(growth_00_05)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))+geom_point(data=city_points,aes(x=Longitude,y=Latitude))
gplot(growth_00_05)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))+geom_point(data=city_points,aes(x=Longitude,y=Latitude),cex=.1)
View(city_points)
city_points[,8]<-paste(city_points[,6],city_points[,7])
city_points<-subset(city_points,unique(city_points[,8]))
city_points<-subset(city_points,by=unique(city_points[,8]))
city_points<-read.csv("liberia_city_names.csv")
city_points[,8]<-paste(city_points[,6],city_points[,7])
city_points2<-unique(city_points$V8)
city_points3<-row.names(unique(city_points$V8))
city_points2
city_points3<-duplicated(city_points)
city_points2<-rownames(unique(city_points$V8)))
city_points2<-rownames(unique(city_points$V8))
city_points2<-rownames(city_points[which(unique(city_points$V8))])
city_points2<-distinct(city_points,"Latitude","Longitude")
View(city_points2)
city_points2<-distinct(city_points,Latitude,Longitude)
View(city_points2)
city_points2<-distinct(city_points,Latitude,Longitude,.keep_all = T)
View(city_points2)
city_points<-read.csv("liberia_city_names.csv")
city_points2<-distinct(city_points,Latitude,Longitude,.keep_all = T)
gplot(growth_00_05)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))+geom_point(data=city_points2,aes(x=Longitude,y=Latitude),cex=.1)
gplot(growth_00_05)+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_tile(aes(fill = value))+geom_point(data=city_points2,aes(x=Longitude,y=Latitude),cex=.01)
View(city_points2)
city_points<-read.csv("liberia_city_names.csv")
city_points<-distinct(city_points,Latitude,Longitude,.keep_all = T)
load("comNames.RData")
city_points2<-load("comNames.RData")
load("comNames.RData")
load("comNames.rdata")
load("comNames.RData")
win<-as(country."owin")
win<-as(country,"owin")
data<-cbind(xyFromCell(gpw4_2000,1:ncell(gpw4_2000)),getValues(gpw4_2000))
data<-na.omit(data)
colnames(data)<-c("long","lat","pop2000")
data2<-cbind(xyFromCell(gpw4_2005,1:ncell(gpw4_2005)),getValues(gpw4_2005))
data2<-na.omit(data2)
colnames(data2)<-c("long","lat","pop2005")
data3<-cbind(xyFromCell(gpw4_2010,1:ncell(gpw4_2010)),getValues(gpw4_2010))
data3<-na.omit(data3)
colnames(data3)<-c("long","lat","pop2010")
data4<-cbind(xyFromCell(gpw4_2015,1:ncell(gpw4_2015)),getValues(gpw4_2015))
data4<-na.omit(data4)
colnames(data4)<-c("long","lat","pop2015")
data5<-cbind(xyFromCell(growth_00_05,1:ncell(growth_00_05)),getValues(growth_00_05))
data5<-na.omit(data5)
colnames(data5)<-c("long","lat","growth05")
data6<-cbind(xyFromCell(growth_05_10,1:ncell(growth_05_10)),getValues(growth_05_10))
data6<-na.omit(data6)
colnames(data6)<-c("long","lat","growth10")
data7<-cbind(xyFromCell(growth_10_15,1:ncell(growth_10_15)),getValues(growth_10_15))
data7<-na.omit(data7)
colnames(data7)<-c("long","lat","growth15")
data_final<-merge(data,data2,by=c("long","lat"))
data_final<-merge(data_final,data3,by=c("long","lat"))
data_final<-merge(data_final,data4,by=c("long","lat"))
data_final<-merge(data_final,data5,by=c("long","lat"))
data_final<-merge(data_final,data6,by=c("long","lat"))
data_final<-merge(data_final,data7,by=c("long","lat"))
data_final[,10]<-1:nrow(data_final)
colnames(data_final)[10]<-"id"
ppp<-ppp(data_final$long,data_final$lat,marks=data_final$pop2010,W=win)
ppp<-ppp(data_final$long,data_final$lat,marks=data.frame(data_final %>% select(pop2010)),W=win)
ppp<-ppp(data_final$long,data_final$lat,marks=data.frame(data_final %>% select(pop2010)))
ppp<-ppp(data_final$long,data_final$lat,marks=data_final %>% select(pop2010))
ppp<-ppp(data_final$long,data_final$lat,marks=data_final$pop2010)
plot(ppp)
ppp2<-as.ppp(data_final,W=win)
ppp<-ppp(data_final$long,data_final$lat,marks=data_final$pop2010,window=win)
plot(ppp)
plot.ppp(ppp,cols=marks)
plot.ppp(ppp,cols=ppp$marks)
plot(density(ppp))
plot(density(ppp,10))
plot(density(ppp,100))
plot(density(ppp,1))
plot(density(ppp,.1))
plot(density(ppp,.01))
plot(density(ppp,.001))
plot(density(ppp,.1))
plot(density(ppp,1))
plot(density(ppp,.01))
plot(density(ppp,1))
data<-cbind(xyFromCell(gpw4_2000,1:ncell(gpw4_2000)),getValues(gpw4_2000))
View(data)
ggplot()+geom_map(data=country_f,map=country_f,aes(x=long,y=lat,map_id=id))+geom_point(data=data_final,mapping=aes(x=long,y=lat,fill=log(pop2005)),size=.000000000000000000000000000000000001)
View(data)
data<-na.omit(data)
rm(list=ls())
setwd("~/GitHub/Liberia")
library(rgdal)
library(dplyr)
library(rgeos)
library(ggmap)
library(raster)
library(spatstat)
library(maptools)
library(sp)
library(foreign)
library(knitr)
library(gridExtra)
library(rasterVis)
library(colorspace)
library(mapdata)
library(rgl)
library(scales)
library(plot3Drgl)
library(plotly)
country<-readOGR(dsn="shapefiles", layer="liberia_revised",stringsAsFactors=FALSE, verbose=FALSE)
cnty<-readOGR(dsn = "shapefiles",layer="counties",stringsAsFactors = FALSE,verbose=FALSE)
dist<-readOGR(dsn="shapefiles",layer="districts", stringsAsFactors = FALSE,verbose = FALSE)
clan<-readOGR(dsn="shapefiles",layer="clans", stringsAsFactors = FALSE,verbose = FALSE)
country<-spTransform(country, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
cnty<-spTransform(cnty, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
dist<-spTransform(dist, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
clan<-spTransform(clan, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
country_f<-fortify(country)
cnty_f<-fortify(cnty)
dist_f<-fortify(dist)
clan_f<-fortify(clan)
gpw4_2000<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2000.tif")
gpw4_2000<-crop(gpw4_2000,extent(country))
gpw4_2005<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2005.tif")
gpw4_2005<-crop(gpw4_2005,extent(country))
gpw4_2010<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2010.tif")
gpw4_2010<-crop(gpw4_2010,extent(country))
gpw4_2015<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2015.tif")
gpw4_2015<-crop(gpw4_2015,extent(country))
cnty@data$SUM_HH[1]<-20508
dist@data[which(dist@data$FIRST_CCNA=="Bomi"),]$HHOLDS<-dist@data[which(dist@data$FIRST_CCNA=="Bomi"),]$TOTAL/(cnty@data$SUM_TOTAL[1]/cnty@data$SUM_HH[1])
clan@data[which(clan@data$FIRST_CCNA=="Bomi"),]$SUM_HH<-clan@data[which(clan@data$FIRST_CCNA=="Bomi"),]$SUM_TOTAL/(cnty@data$SUM_TOTAL[1]/cnty@data$SUM_HH[1])
clan@data[which(clan@data$FIRST_CCNA=="River Gee"),]$SUM_HH[29]<-clan@data[which(clan@data$FIRST_CCNA=="River Gee"),]$SUM_TOTAL[29]/mean(clan@data[which(clan@data$FIRST_CCNA=="River Gee"),]$SUM_TOTAL[c(1:28,30:45)]/clan@data[which(clan@data$FIRST_CCNA=="River Gee"),]$SUM_HH[c(1:28,30:45)])
growth_00_05<-overlay(gpw4_2000,gpw4_2005,fun=function(r1,r2){return((r2-r1)/r1)})
growth_05_10<-overlay(gpw4_2005,gpw4_2010,fun=function(r1,r2){return((r2-r1)/r1)})
growth_10_15<-overlay(gpw4_2010,gpw4_2015,fun=function(r1,r2){return((r2-r1)/r1)})
data<-cbind(xyFromCell(gpw4_2000,1:ncell(gpw4_2000)),getValues(gpw4_2000))
data<-na.omit(data)
colnames(data)<-c("long","lat","pop2000")
data2<-cbind(xyFromCell(gpw4_2005,1:ncell(gpw4_2005)),getValues(gpw4_2005))
data2<-na.omit(data2)
colnames(data2)<-c("long","lat","pop2005")
data3<-cbind(xyFromCell(gpw4_2010,1:ncell(gpw4_2010)),getValues(gpw4_2010))
data3<-na.omit(data3)
colnames(data3)<-c("long","lat","pop2010")
data4<-cbind(xyFromCell(gpw4_2015,1:ncell(gpw4_2015)),getValues(gpw4_2015))
data4<-na.omit(data4)
colnames(data4)<-c("long","lat","pop2015")
data5<-cbind(xyFromCell(growth_00_05,1:ncell(growth_00_05)),getValues(growth_00_05))
data5<-na.omit(data5)
colnames(data5)<-c("long","lat","growth05")
data6<-cbind(xyFromCell(growth_05_10,1:ncell(growth_05_10)),getValues(growth_05_10))
data6<-na.omit(data6)
colnames(data6)<-c("long","lat","growth10")
data7<-cbind(xyFromCell(growth_10_15,1:ncell(growth_10_15)),getValues(growth_10_15))
data7<-na.omit(data7)
colnames(data7)<-c("long","lat","growth15")
data_final<-merge(data,data2,by=c("long","lat"))
data_final<-merge(data_final,data3,by=c("long","lat"))
data_final<-merge(data_final,data4,by=c("long","lat"))
data_final<-merge(data_final,data5,by=c("long","lat"))
data_final<-merge(data_final,data6,by=c("long","lat"))
data_final<-merge(data_final,data7,by=c("long","lat"))
data_final[,10]<-1:nrow(data_final)
colnames(data_final)[10]<-"id"
install.packages("plotly")
install.packages("plotly")
library(plotly)
library(plotly)
install.packages("plotly")
library(plotly)
install.packages("htmlwidgets")
install.packages("htmlwidgets")
View(clan_f)
library(plotly)
library(rgdal)
library(dplyr)
library(rgeos)
library(ggmap)
library(raster)
library(spatstat)
library(maptools)
library(sp)
library(foreign)
library(knitr)
library(gridExtra)
library(rasterVis)
library(colorspace)
library(mapdata)
library(rgl)
library(scales)
library(plot3Drgl)
library(rgl)
install.packages("rgl",dependencies = T)
install.packages("XQuartz")
install.packages("rgl",dependencies = T)
install.packages("XQuartz")
rm(list=ls())
setwd("~/GitHub/Liberia")
rm(list=ls())
setwd("~/GitHub/Liberia")
library(rgdal)
library(dplyr)
library(rgeos)
library(ggmap)
library(raster)
library(spatstat)
library(maptools)
library(sp)
library(foreign)
library(knitr)
library(gridExtra)
library(rasterVis)
library(colorspace)
library(mapdata)
library(rgl)
library(scales)
library(plot3Drgl)
library(akima)
country<-readOGR(dsn="shapefiles", layer="liberia_revised",stringsAsFactors=FALSE, verbose=FALSE)
cnty<-readOGR(dsn = "shapefiles",layer="counties",stringsAsFactors = FALSE,verbose=FALSE)
dist<-readOGR(dsn="shapefiles",layer="districts", stringsAsFactors = FALSE,verbose = FALSE)
clan<-readOGR(dsn="shapefiles",layer="clans", stringsAsFactors = FALSE,verbose = FALSE)
country<-spTransform(country, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
cnty<-spTransform(cnty, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
dist<-spTransform(dist, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
clan<-spTransform(clan, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
### Fortify shapefiles ###
country_f<-fortify(country)
cnty_f<-fortify(cnty)
dist_f<-fortify(dist)
clan_f<-fortify(clan)
## Import GPW4 data ##
gpw4_2000<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2000.tif")
gpw4_2000<-crop(gpw4_2000,extent(country))
#gpw4_2000<-mask(gpw4_2000,country)
gpw4_2005<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2005.tif")
gpw4_2005<-crop(gpw4_2005,extent(country))
#gpw4_2005<-mask(gpw4_2005,country)
gpw4_2010<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2010.tif")
gpw4_2010<-crop(gpw4_2010,extent(country))
#gpw4_2010<-mask(gpw4_2010,country)
gpw4_2015<-raster("~/GoogleDrive/LiberiaProject/gpw-v4-population-count_2015.tif")
gpw4_2015<-crop(gpw4_2015,extent(country))
#gpw4_2015<-mask(gpw4_2015,country)
growth_00_05<-overlay(gpw4_2000,gpw4_2005,fun=function(r1,r2){return((r2-r1)/r1)})
growth_05_10<-overlay(gpw4_2005,gpw4_2010,fun=function(r1,r2){return((r2-r1)/r1)})
growth_10_15<-overlay(gpw4_2010,gpw4_2015,fun=function(r1,r2){return((r2-r1)/r1)})
load("lbr_data_final.RData")
plot1<-plot3D(gpw4_2010, useLegend=T)
summary(plot1)
head(plot1)
class(plot1)
plot3D(gpw4_2010, useLegend=T,col=blueblue)
blueblue<-colorRampPalette(brewer.pal(9,"Blues"))(250)
plot3D(gpw4_2010, useLegend=T,col=blueblue)
plot3D(gpw4_2010,col=blueblue)
plot3D(gpw4_2000,at = seq(1,250,by=1),col=blueblue)
plot3D(gpw4_2000,at = seq(1,250,by=1),col=blueblue)
colortable(gpw4_2010)<-as.numeric(blueblue)
blueblue<-colorRampPalette(brewer.pal(9,"Blues"))(250)
blueblue<-colorRampPalette(brewer.pal(9,"Blues"))(256)
colortable(gpw4_2010)<-blueblue
plot3D(gpw4_2000,col=rainbow)
plot3D(gpw4_2000,col=rainbow)
col<-rgb(blueblue,maxColorValue = 255)
ramp <- colorRamp(c("red", "white"))
rgb( ramp(seq(0, 1, length = 5)), max = 255)
rgb( ramp(seq(0, 1, length = 255)), max = 255)
rgb<-rgb( ramp(seq(0, 1, length = 255)), max = 255)
colortable(gpw4_2010)<-rgb
plot3D(gpw4_2000,useLegend = TRUE)
ramp <- colorRamp(c("red", "white"))
rgb<-rgb( ramp(seq(0, 1, length = 5)), max = 255)
colortable(gpw4_2010)<-rgb
plot3D(gpw4_2000,useLegend = TRUE)
rgb<-rgb( ramp(seq(0, 1, length = 25)), max = 255)
colortable(gpw4_2010)<-rgb
plot3D(gpw4_2000,useLegend = TRUE)
rgb<-rgb( ramp(seq(0, 1, length = 255)), max = 255)
colortable(gpw4_2010)<-rgb
plot3D(gpw4_2010,useLegend = TRUE)
rgb<-rgb( ramp(seq(0, 1, length = 5)), max = 255)
colortable(gpw4_2010)<-rgb
plot3D(gpw4_2010,useLegend = TRUE)
rgb<-rgb( ramp(seq(0, 1, length = 10)), max = 255)
colortable(gpw4_2010)<-rgb
plot3D(gpw4_2010,useLegend = TRUE)
rgb<-rgb( ramp(seq(0, 1, length = 100)), max = 255)
colortable(gpw4_2010)<-rgb
plot3D(gpw4_2010,useLegend = TRUE)
rgb<-rgb( ramp(seq(0, 1, length = 255)), max = 255)
colortable(gpw4_2010)<-rgb
plot3D(gpw4_2010,useLegend = TRUE)
r <- raster(ncol=10, nrow=10)
values(r) <- sample(0:255, ncell(r), replace=TRUE)
ctab <- sample(rainbow(256))
colortable(r) <- ctab
plot(r)
head(colortable(r))
plot3D(r,useLegend = TRUE)
colortable(r) <- blueblue
plot(r)
plot3D(r,useLegend = TRUE)
plot3D(r,useLegend = TRUE)
gpw4_2010<-mask(gpw4_2010,country)
plot3D(gpw4_2000,at = seq(1,256,by=1),col=blueblue)
plot3D(gpw4_2010,at = seq(1,256,by=1),col=blueblue)
colortable(gpw4_2010)<-blueblue
plot3D(gpw4_2010,useLegend = TRUE)
